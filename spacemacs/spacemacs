;; -*- mode: emacs-lisp -*-

(defun dotspacemacs/layers ()
  (setq-default
   ;; Base distribution to use. This is a layer contained in the directory
   ;; `+distribution'. For now available distributions are `spacemacs-base'
   ;; or `spacemacs'. (default 'spacemacs)
   dotspacemacs-distribution 'spacemacs
   ;; List of additional paths where to look for configuration layers.
   ;; Paths must have a trailing slash (i.e. `~/.mycontribs/')
   dotspacemacs-configuration-layer-path '()
   ;; List of configuration layers to load. If it is the symbol `all' instead
   ;; of a list then all discovered layers will be installed.
   dotspacemacs-configuration-layers
   '(
     better-defaults
     emacs-lisp
     markdown
     evil-commentary
     evil-snipe
     vim-empty-lines
     (javascript :variables javascript t)
     git
     sql
     react
     php
     (auto-completion
      :variables
      auto-completion-enable-sort-by-usage t
      auto-completion-enable-help-help-tooltip nil)
     (syntax-checking :variables syntax-checking-enable-by-default nil)
     html
 )
   ;; List of additional packages that will be installed without being
   ;; wrapped in a layer. If you need some configuration for these
   ;; packages, then consider creating a layer. You can also put the
   ;; configuration in `dotspacemacs/user-config'.
   dotspacemacs-additional-packages
   '(
     (eclipse-theme :location
                    (recipe :fetcher github
                            :repo "abo-abo/eclipse-theme"))
     )
   ;; A list of packages and/or extensions that will not be install and loaded.
   dotspacemacs-excluded-packages '(spaceline)
   ;; If non-nil spacemacs will delete any orphan packages, i.e. packages that
   ;; are declared in a layer which is not a member of
   ;; the list `dotspacemacs-configuration-layers'. (default t)
   dotspacemacs-delete-orphan-packages t))

(defun dotspacemacs/init ()
  "Initialization function.
This function is called at the very startup of Spacemacs initialization
before layers configuration.
You should not put any user code in there besides modifying the variable
values."
  ;; This setq-default sexp is an exhaustive list of all the supported
  ;; spacemacs settings.
  (setq-default
   dotspacemacs-elpa-https nil
   dotspacemacs-elpa-timeout 5
   dotspacemacs-check-for-update nil
   ;; One of `vim', `emacs' or `hybrid'.
   dotspacemacs-editing-style 'vim
   dotspacemacs-verbose-loading nil
   ;; One of `nil', `random' or `officiel' or your own (core/banners).
   dotspacemacs-startup-banner nil
   ;; Possible values are: `recents' `bookmarks' `projects'.
   dotspacemacs-startup-lists '(recents projects)
   dotspacemacs-startup-recent-list-size 5
   ;; If non nil the cursor color matches the state color in GUI Emacs.
   dotspacemacs-colorize-cursor-according-to-state t
   ;; Approved: M+ 2m, M+ 1mn, Fira Mono, CamingoCode, Monoid, Aurulent Sans Mono,  Menlo, Meslo LG S DZ
   dotspacemacs-default-font '("CamingoCode"
                               :size 15
                               :weight normal
                               :width normal
                               :powerline-scale 1.1)
   ;; Set leader key
   dotspacemacs-leader-key "SPC"
   dotspacemacs-emacs-leader-key "M-m"
   ;; Major mode leader key is a shortcut key which is the equivalent of
   dotspacemacs-major-mode-leader-key ","
   dotspacemacs-major-mode-emacs-leader-key "C-M-m"
   dotspacemacs-distinguish-gui-tab nil
   dotspacemacs-command-key ":"
   dotspacemacs-remap-Y-to-y$ t
   dotspacemacs-default-layout-name "Default"
   ;; If non nil the default layout name is displayed in the mode-line.
   dotspacemacs-display-default-layout nil
   ;; If non nil then the last auto saved layouts are resume automatically upon
   dotspacemacs-auto-resume-layouts nil
   ;; (default 'cache)
   dotspacemacs-auto-save-file-location 'cache
   dotspacemacs-max-rollback-slots 5
   ;; If non nil then `ido' replaces `helm' for some commands. For now only
   dotspacemacs-use-ido nil
   ;; If non nil, `helm' will try to minimize the space it uses. (default nil)
   dotspacemacs-helm-resize nil
   dotspacemacs-helm-no-header nil
   dotspacemacs-helm-position 'bottom
   dotspacemacs-enable-paste-micro-state nil
   dotspacemacs-which-key-delay 0.4
   dotspacemacs-which-key-position 'bottom
   dotspacemacs-loading-progress-bar nil
   dotspacemacs-fullscreen-at-startup nil
   dotspacemacs-fullscreen-use-non-native nil
   dotspacemacs-maximized-at-startup nil
   dotspacemacs-active-transparency 90
   dotspacemacs-inactive-transparency 90
   dotspacemacs-mode-line-unicode-symbols t
   dotspacemacs-smooth-scrolling nil
   dotspacemacs-line-numbers nil
   dotspacemacs-smartparens-strict-mode nil
   dotspacemacs-highlight-delimiters 'all
   dotspacemacs-persistent-server nil
   dotspacemacs-search-tools '("ag" "pt" "ack" "grep")
   dotspacemacs-default-package-repository nil
   dotspacemacs-whitespace-cleanup 'changed
   ))

(defun stormpat/web-mode-hook ()
  "Custom hooks for web-mode"
  (setq web-mode-markup-indent-offset 2)
  (setq web-mode-css-indent-offset 2)
  (setq web-mode-style-padding 2)
  (setq web-mode-script-padding 2)
  (setq web-mode-code-indent-offset 2)
  (setq-default web-mode-markup-indent-offset 2)
  )

;; Print the current file name to the buffer.
(defun u/add-current-file-name ()
  "Insert the full path file name into the current buffer."
  (interactive)
  (insert (buffer-file-name (window-buffer (minibuffer-selected-window)))))

;; Live serach the spacemacs docs with helm.
(defun u/search-spacemacs-docs ()
  "Search the spacemacs docs using helm-do-ag"
  (interactive)
  (helm-do-ag "~/.emacs.d/doc/"))

(defun dotspacemacs/user-init ()
  "Initialization function for user code.
   It is called immediately after `dotspacemacs/init'.  You are free to put almost
   any user code here.  The exception is org related code, which should be placed
   in `dotspacemacs/user-config'."
  (add-hook 'json-mode-hook
            (lambda ()
              (make-local-variable 'js-indent-level)
              (setq js-indent-level 2)))
  ;; Limit kill ring to 10 items
  (setq kill-ring-max 10)
  ;; Weird error (https://github.com/syl20bnr/spacemacs/issues/3920)

(defun dotspacemacs/user-config ()
  "Configuration function for user code.
   This function is called at the very end of Spacemacs initialization after
   layers configuration. You are free to put any user code."
  ;; Silence js2-mode errors (instead lint with eslint)
  ;; (setq-default js2-strict-trailing-comma-warning nil)
  ;; (setq js2-highlight-external-variables nil)
  ;; Make which-key more snappy
  (setq which-key-idle-delay 0.01)
  (setq which-key-idle-secondary-delay 0.01)
  ;; We want company-mode enabled globally
  (global-company-mode)
  ;; Always truncate lines
  (setq-default truncate-lines t)
  ;; Disable smartparens
  (turn-off-show-smartparens-mode)
  ;; Simplyfy the GUI title
  (setq frame-title-format "M-x")
  ;; Paste behaviour
  (fset 'evil-visual-update-x-selection 'ignore)
  (setq powerline-default-separator 'arrow)
  (setq flycheck-checker-error-threshold 400)
  ;;(add-to-hooks #'linum-mode '(js2-mode-hook))
  (add-to-list 'auto-mode-alist '("\\.php\\'" . web-mode))
  (setq-default company-idle-delay 0.0)
  ;; Set indents to two spaces, override some defaults.
  (setq-default css-indent-offset 2)
  (setq-default web-mode-markup-indent-offset 2)
  (setq tab-width 2)
  ;; Initialize web-mode custom hooks
  (add-hook 'web-mode-hook 'stormpat/web-mode-hook)
  ;; Set helm ignore folders
  ;;(add-to-list 'projectile-ignored-directories "node_modules")
  (setq x-select-enable-clipboard t)
  ;; Disable neotree vc-integration -> spacemacs/issues/2943
  (setq neo-vc-integration nil)
  ;; Try to fix heavy font-locks on large buffers
  ;; Try to speed up js2-mode
  ;; (setq js2-idle-timer-delay 2)
  (setq blink-matching-paren nil)
  ;;(setq font-lock-maximum-decoration nil)
  ;; Map keys to user customer functions [Use `m` for namespacing]
  ;; File related
  (evil-leader/set-key (kbd "omc") 'u/add-current-file-name)
  (evil-leader/set-key (kbd "omr") 'recentf-open-files)
  ;; Search related
  (evil-leader/set-key (kbd "omd") 'u/search-spacemacs-docs)
  ;; Git related
  (evil-leader/set-key (kbd "ogx") 'magit-blame-quit)
  ;; Evalute JavaScript
  (evil-leader/set-key (kbd "oe") 'js-send-buffer-and-go)
  ;; Buffer related (should be under o directly)
  (evil-leader/set-key (kbd "ol") 'avy-goto-line)
  (evil-leader/set-key (kbd "oc") 'avy-copy-line)
  (evil-leader/set-key (kbd "or") 'avy-copy-region)
  (evil-leader/set-key (kbd "oh") 'avy-goto-char-in-line)
  (evil-leader/set-key (kbd "on") 'spacemacs/new-empty-buffer)
  )

;; Do not write anything past this comment. This is where Emacs will
;; auto-generate custom variable definitions.
(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(ansi-color-names-vector
   ["#242424" "#e5786d" "#95e454" "#cae682" "#8ac6f2" "#333366" "#ccaa8f" "#f6f3e8"])
 '(custom-safe-themes
   (quote
    ("fa2b58bb98b62c3b8cf3b6f02f058ef7827a8e497125de0254f56e373abee088" "bffa9739ce0752a37d9b1eee78fc00ba159748f50dc328af4be661484848e476" "ed58c97cceaa93c5b77dae669ae8c984295e440ac52aff10539134c8bd7568fe" default)))
 '(sql-connection-alist
   (quote
    (("innovoice"
      (sql-product
       (quote mysql))
      (sql-user "root")
      (sql-database "innovoice")
      (sql-server "192.168.22.10"))))))
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(company-tooltip-common ((t (:inherit company-tooltip :weight bold :underline nil))))
 '(company-tooltip-common-selection ((t (:inherit company-tooltip-selection :weight bold :underline nil)))))
